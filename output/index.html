<!DOCTYPE html>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <title>iOS App 開發入門</title>
  <link rel='stylesheet' href='reader.css'>
</head>
<body>
  <div id='book'>
    <header>
      <h1><a @click="showing='Table of Content'">iOS App 開發入門</a></h1>
      <div class="menu-btn"><a href="#toc">Menu</a></div>
    </header>
    <div class='main-area'>
      <main>
        <div class='section-content'>
<section v-show='showing=="Table of Content"'><h1>iOS App 開發入門</h1>

<p>
這是一個針對 iOS 開發的入門課程。目標教授如何利用 Xcode 開發環境及 iOS 的開發 SDK 及各種 API 來開發移動應用程式。最後將程應發佈到 App Store 上架。

</p><ol class='toc'><li><a href='#' @click="showing='Table of Content'">Table of Content</a></li><li><a href='#' @click="showing='Xcode 介面介紹'">Xcode 介面介紹</a></li><li><a href='#' @click="showing='開發 iOS App，我應該選擇 Objective-C 還是 Swift 語言？'">開發 iOS App，我應該選擇 Objective-C 還是 Swift 語言？</a></li><li><a href='#' @click="showing='iOS Simulator'">iOS Simulator</a></li><li><a href='#' @click="showing='UIImageView'">UIImageView</a></li><li><a href='#' @click="showing='Extension'">Extension</a></li><li><a href='#' @click="showing='IBAction & IBOutlet'">IBAction & IBOutlet</a></li><li><a href='#' @click="showing='Storyboard'">Storyboard</a></li><li><a href='#' @click="showing='UIButton'">UIButton</a></li><li><a href='#' @click="showing='UserDefaults'">UserDefaults</a></li><li><a href='#' @click="showing='Core Data'">Core Data</a></li><li><a href='#' @click="showing='保護層級'">保護層級</a></li><li><a href='#' @click="showing='設定多語言'">設定多語言</a></li><li><a href='#' @click="showing='多語言下的檔案列表'">多語言下的檔案列表</a></li><li><a href='#' @click="showing='輸出及匯入多語言檔案'">輸出及匯入多語言檔案</a></li><li><a href='#' @click="showing='App Store 上架介紹'">App Store 上架介紹</a></li><li><a href='#' @click="showing='使用 AppStoreConnect'">使用 AppStoreConnect</a></li><li><a href='#' @click="showing='使用 AlamoFire 取得網絡資源'">使用 AlamoFire 取得網絡資源</a></li><li><a href='#' @click="showing='範例：載入澳門圖書館列表'">範例：載入澳門圖書館列表</a></li><li><a href='#' @click="showing='錯誤提示'">錯誤提示</a></li><li><a href='#' @click="showing='載入中提示'">載入中提示</a></li></ol></section>
<book-section :showing='showing' title='Xcode 介面介紹'><div>
<div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screen_Shot_2018-03-12_at_10.41.00_PM.png" width="2160" height="1512"><figure class="attachment attachment--preview">
  <img width="2160" height="1512" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screen_Shot_2018-03-12_at_10.41.00_PM.png"/>
</figure></div><br/><br/><div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screen_Shot_2018-03-13_at_3.51.46_PM.png" width="190" height="58"><figure class="attachment attachment--preview">
  <img width="190" height="58" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screen_Shot_2018-03-13_at_3.51.46_PM.png"/>
</figure></div><br/><br/><br/><div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/985495DF-31F2-4F38-A23F-9DCD4529B4D4.jpeg" width="2853" height="1963"><figure class="attachment attachment--preview">
  <img width="2853" height="1963" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/985495DF-31F2-4F38-A23F-9DCD4529B4D4.jpeg"/>
</figure></div>
</div>

</book-section>
<book-section :showing='showing' title='開發 iOS App，我應該選擇 Objective-C 還是 Swift 語言？'><div>
<br/>Objective-C 歷史悠久，自 80 年代後便已面世，並且一直是 Mac 機軟件開發所使用的編程語言，所以 iOS 推出時，也順理成章使用 Objective-C 語言。但 Objective-C 語言其實寫法較為獨特，和傳統的 C / Java 等語言寫法有一定差距，導致除了 Mac 開發外，使用 Objective-C 的人不多。<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screen_Shot_2018-03-13_at_4.07.27_PM.png" width="824" height="104">
    <figure class="attachment attachment--preview">
  <img width="824" height="104" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screen_Shot_2018-03-13_at_4.07.27_PM.png"/>
</figure>
  </div>
</div>

<div>
<br/>為了更好地推廣編程學習，蘋果便於數年前推出了 <a href="https://swift.org/" target="_blank" rel="noreferrer">Swift 語言</a>。在經歷多年的使用及調整後，現在 Swift 語言已經趨向穩定成熟，而且網上的新教材基本上都使用 Swift 語言了。<br/><br/>
</div>

<div>
<br/>所以，如果現在開始學寫 iOS 應用，直接選擇 Swift 是擁抱美來的好選擇。而 Objective-C，就是以往寫下的代碼，沒有出錯不去改而矣。</div>

</book-section>
<book-section :showing='showing' title='iOS Simulator'><div>在我們落實體機試之前，我們一般會利用 Xcode 跟來的模擬器進行測試。iOS Simulator 模擬器讓我們選擇從 iPhone 5s 至 iPhone X 的不同畫面尺寸，方便測試應用在不同畫面的運行情況。<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screen_Shot_2018-03-12_at_10.41.07_PM.png" width="784" height="1618">
    <figure class="attachment attachment--preview">
  <img width="784" height="1618" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screen_Shot_2018-03-12_at_10.41.07_PM.png"/>
</figure>
  </div>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screen_Shot_2018-03-12_at_10.38.11_PM.png" width="570" height="1044">
    <figure class="attachment attachment--preview">
  <img width="570" height="1044" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screen_Shot_2018-03-12_at_10.38.11_PM.png"/>
</figure>
  </div>
</div>



</book-section>
<book-section :showing='showing' title='UIImageView'><div>UIImageView 是用來顯示 UIImage 的界面元素。<br/><br/>預設 UIImageView 只適合顯示本地（Local）的影像數據。UIImageView 顧名思義是顯示 UIImage 的，所以要顯示什麼數據，就主要看 UIImage 的影像數據從哪𥚃獲得。</div>

<ol>
<li>最直接的方法是使用<em>影像檔案名稱</em>，來載入已經儲存到項目內的本地圖像。</li>
<li>另外，就是使用 NSData，想辦法動態生成圖像格式，然後以 UIImageView顯示出來。例如畫板 App 或者填色 App，又或者不同特效的影相 App，都是動態生成圖像的。</li>
<li>從網絡載入圖片，預設的 API 會較為繁複。需要先使用 NSURLConnection 或 NSURLSession 取得網絡數據，再按其返回值（Response）的 header 來說明下載回來的數據所相對應的圖片格式。然後通過 NSData 生成 UIImage。</li>
<li>另一個從網絡載入圖片的快速方法，是使用第三方程序庫，其內部做法跟以上第 3 點一樣，但通常第三方程序庫會提供了一個易用的 API。例如 AlamoFire 會有個 UIImageView extension： `af_setImage(withURL:)`</li>
</ol>

</book-section>
<book-section :showing='showing' title='Extension'><div>Swift 的 Extension 就要所謂的 Monkey Patch。即對一個已 Compile 的類（Class）再擴展。<br/><br/>
</div>

<div>Extension 有點類似 Mixin 的概念。其優點是不用再為特定功能而建立 Subclass，因為不同情況下為使用不同功能，未必是 Subclass 可以解決的。<br/><br/>
</div>

<div>其缺點是如果擴展的函數和原有的函數名稱相同，就會有 Override 出現，並產生同一個函數而行為不一致的問題。所以 AlamoFire 的解決方法是在所有 Extension 上加上 prefix，例如 `af_setImage(withURL:)` 而不是直接使用 `setImage(withURL:)`。</div>

</book-section>
<book-section :showing='showing' title='IBAction & IBOutlet'><div>IBAction 和 IBOutlet 是程序和界面的兩種連結。<br/><br/>IBOutlet 是用一程序變量來記錄（reference）一個界面元素，好讓我們在程序中再動態地設定這個界面元素。例如設定一個 UILabel 顯示不同的文字輸出等。<br/><br/>
</div>

<div>IBAction 是一個函數（function/method），當界面上有互動發生時，例如 UIButton 按下時，需要調用程序的哪一段代碼。</div>

</book-section>
<book-section :showing='showing' title='Storyboard'><div>Storyboard 可以讓我們在一個檔案管理多個關連的介面。這方便我們統一管理這些界面及他們之間的顯示關連。<br/><br/>
</div>

<div>在使用 Storyboard 以前，我們使用 xib 檔案獨立設定每個畫面。單獨畫面設定的操作其實和 Storyboard 內的畫面設定差不多，Storyboard 多了的是界面之間的連繫。</div>

</book-section>
<book-section :showing='showing' title='UIButton'><div>UIButton 可以讓我們接受用戶互動的各項事件，在介面上拉好 UIButton 後，就可以通過滑鼠右鍵拖拉的方式，拖拉到程序上，建立 IBAction。<br/><br/>
</div>

<div>另外，UIButton 在設定選項中，可以選擇不同的狀態（State），最常用的狀態，除了平常狀態外，就是 當手指按下時的 Highlight 了。如果於按鈕上使用圖片，也可以在這個 Highlight 狀態設定不同的圖片，做到按下去的效果。<br/><br/>
</div>

<div>另一種狀態是停用（Disabled），當一個按鈕不想被用戶按下時可以設定為停用。</div>

</book-section>
<book-section :showing='showing' title='UserDefaults'><pre>// set
UserDefaults.standard.set("anything", forKey: "yourKey")

// get
UserDefaults.standard.value(forKey: "yourKey")</pre>



</book-section>
<book-section :showing='showing' title='Core Data'><div>Keywords：</div>

<ul>
<li>PersistentContainer</li>
<li>PersistentStore</li>
<li>PersistentStoreCoordinator</li>
<li>Entity</li>
<li>EntityDescription</li>
<li>Context</li>
<li>Managed Object</li>
</ul>

<div>
  <strong><br/>Managed Object code generation</strong>
</div>

<ul>
<li>Class Definition: 全部 Xcode 管理</li>
<li>Category/Extension: 自己定義 NSManagedObject subclass，Xcode 管理 Extension</li>
<li>Manual/None: 自己定義 NSManagedObject subclass 及 Extension</li>
</ul>

<div>
<br/>自己管理越多，彈性越大，但亦越要自己動手寫。</div>

<div>
  <br/>
</div>

<h1>
  <strong>新增記錄</strong>
</h1>

<div>
  <br/>
</div>

<pre>let entity = NSEntityDescription.entity(forEntityName: "Friend", in: persistentContainer.viewContext)
        
let friend = Friend(entity: entity!, insertInto: persistentContainer.viewContext)
friend.name = "Jack Chan"
friend.tel = "66661234"
self.saveContext()
<br/></pre>

<div>
  <br/>
</div>

<h1>搜尋記錄</h1>

<div>
  <br/>
</div>

<pre>let fetchRequest:NSFetchRequest&lt;Friend&gt; = Friend.fetchRequest()

do {
    let results = try persistentContainer.viewContext.fetch(fetchRequest)
    print(results.count)
    for friend in results {
        print(friend.name)
        print(friend.tel)
    }
} catch {
    print("Fetch error.")
}
<br/></pre>

<div>
  <br/>
</div>

<h1>刪除</h1>

<div>
  <br/>
</div>

<pre>persistentContainer.viewContext.delete(friend)</pre>

</book-section>
<book-section :showing='showing' title='保護層級'><div>保護層級</div>

<ul>
<li>NSFileProtectionComplete</li>
<li>NSFileProtectionCompleteUnlessOpen</li>
<li>NSFileProtectionCompleteUntilFirstUserAuthentication</li>
<li>NSFileProtectionNone</li>
</ul>

<div>
<br/>More Detail： <a href="https://pspdfkit.com/blog/2017/how-to-use-ios-data-protection/" target="_blank" rel="noreferrer">https://pspdfkit.com/blog/2017/how-to-use-ios-data-protection/<br/></a><br/>
</div>

<div>
<br/>Apple iOS Security Guide： <a href="https://www.apple.com/business/docs/iOS_Security_Guide.pdf" target="_blank" rel="noreferrer">https://www.apple.com/business/docs/iOS_Security_Guide.pdf<br/></a><br/>
</div>

<div>
  <br/>
</div>

<h1>
  <strong>設定 File Protection Tips:</strong>
</h1>

<ol>
<li>Enable File Protection using the Capabilities tab on your app target</li>
<li>If you do not want the default NSFileProtectionComplete, change this setting in the developer portal under your app id</li>
<li>Make sure Xcode has the new provisioning profile this creates.</li>
<li>For protecting files your app creates, that's it.</li>
<li>To protect Core Data, you need to add the NSPersistentStoreFileProtectionKey: NSFileProtectionComplete option to your persistent store.</li>
</ol>

<pre>storeDescription.setOption(FileProtectionType.completeUnlessOpen as NSObject, forKey: NSPersistentStoreFileProtectionKey)
            container.persistentStoreDescriptions = [storeDescription]</pre>



</book-section>
<book-section :showing='showing' title='設定多語言'><div>
  <strong>加入語言</strong>
</div>

<div>
<br/>首先選擇項目，然後在 Menu 中選擇 Editor &gt; Add Localization<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.55.32.png" width="1024" height="1606">
    <figure class="attachment attachment--preview">
  <img width="1024" height="1606" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.55.32.png"/>
</figure>
  </div>
</div>

<div>
<br/>如果已經有 Localized 檔案，Xcode 會詢問<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.20.48.png" width="1542" height="980">
    <figure class="attachment attachment--preview">
  <img width="1542" height="980" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.20.48.png"/>
</figure>
  </div>
</div>

<div>
<strong>調試多語言<br/></strong><br/>
</div>

<div>可以在 Scheme &gt; Edit Scheme 中，在運行選項（Run &gt; Options）中選擇要使用哪種語言來運行應用程式。<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.50.13.png" width="1790" height="1026">
    <figure class="attachment attachment--preview">
  <img width="1790" height="1026" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.50.13.png"/>
</figure>
  </div>
</div>

<div>
<br/>亦可以在 Assistant Editor 中選擇相關多語言設定。<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2018.01.03.png" width="1142" height="404">
    <figure class="attachment attachment--preview">
  <img width="1142" height="404" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2018.01.03.png"/>
</figure>
  </div>
</div>

<div>如果選擇 Preview，可以直接在 Xcode Storyboard 中預覽不同語言的介面。<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.31.07.png" width="5344" height="3058">
    <figure class="attachment attachment--preview">
  <img width="5344" height="3058" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.31.07.png"/>
</figure>
  </div>
</div>

<div>
<strong><br/>圖片<br/></strong><br/>
</div>

<div>在檔案列按下圖片，然後在右方選擇 Localize...<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2017.57.40.png" width="534" height="142">
    <figure class="attachment attachment--preview">
  <img width="534" height="142" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2017.57.40.png"/>
</figure>
  </div>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.52.49.png" width="1694" height="1360">
    <figure class="attachment attachment--preview">
  <img width="1694" height="1360" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.52.49.png"/>
</figure>
  </div>
</div>

<div>跟接著，替換相關檔案：<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/250x250@2x-apple.png" width="500" height="500">
    <figure class="attachment attachment--preview">
  <img width="500" height="500" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/250x250@2x-apple.png"/>
</figure>
  </div>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/250x250@2x-%E8%98%8B%E6%9E%9C.png" width="500" height="500">
    <figure class="attachment attachment--preview">
  <img width="500" height="500" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/250x250@2x-%E8%98%8B%E6%9E%9C.png"/>
</figure>
  </div>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/250x250@2x-%E8%8B%B9%E6%9E%9C.png" width="500" height="500">
    <figure class="attachment attachment--preview">
  <img width="500" height="500" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/250x250@2x-%E8%8B%B9%E6%9E%9C.png"/>
</figure>
  </div>
</div>

<div>
<br/>並得出最終成品<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2017.58.40.png" width="646" height="212">
    <figure class="attachment attachment--preview">
  <img width="646" height="212" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2017.58.40.png"/>
</figure>
  </div>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.53.44.png" width="974" height="1602">
    <figure class="attachment attachment--preview">
  <img width="974" height="1602" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.53.44.png"/>
</figure>
  </div>
</div>



</book-section>
<book-section :showing='showing' title='多語言下的檔案列表'><div>多語言下的檔案列表</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.54.51.png" width="548" height="1084">
    <figure class="attachment attachment--preview">
  <img width="548" height="1084" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.54.51.png"/>
</figure>
  </div>
</div>

</book-section>
<book-section :showing='showing' title='輸出及匯入多語言檔案'><div>Xcode 可以讓我們輸出多語言用的 XLIFF 檔案，以方便翻譯者翻譯。</div>

<div>
  <br/>
</div>

<div>XLIFF 是 XML Localization Interexchange File Format 的意思。<br/><br/>
</div>

<div>翻譯完成後，我們可以從新匯入，匯入時，如果和原有檔案有 Conflict，Xcode 會彈出比較讓我們審視。<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.12.43.png" width="5344" height="3058">
    <figure class="attachment attachment--preview">
  <img width="5344" height="3058" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/Screenshot%202018-07-19%2015.12.43.png"/>
</figure>
  </div>
</div>

<div>
  <strong><br/>如何開啟 XLIFF 檔案？</strong>
</div>

<ul>
<li><a target="_blank" rel="noreferrer" class="autolinked" data-behavior="truncate" href="https://en.wikipedia.org/wiki/XLIFF">https://en.wikipedia.org/wiki/XLIFF</a></li>
<li><a target="_blank" rel="noreferrer" class="autolinked" data-behavior="truncate" href="http://xliff.brightec.co.uk">http://xliff.brightec.co.uk</a></li>
</ul>

<div>
  <br/>
</div>

<h1>
  <strong>於 App 內轉換語言</strong>
</h1>

<div>
<br/>要在 App 內轉換語言，涉及動態地載入不同的 .lproj 檔案。<br/><br/>
</div>

<ul>
<li><a href="https://stackoverflow.com/questions/29985614/how-can-i-change-the-localization-programmatically-by-swift" target="_blank" rel="noreferrer">Stackflow</a></li>
<li><a href="https://www.factorialcomplexity.com/blog/2015/01/28/how-to-change-localization-internally-in-your-ios-application.html" target="_blank" rel="noreferrer">https://www.factorialcomplexity.com/</a></li>
<li><a href="https://forums.developer.apple.com/message/36704#36704" target="_blank" rel="noreferrer">蘋果職員不建議 App 內轉換：</a></li>
</ul>

<blockquote>
<br/>The system does not support changing your app's localisation on the fly. If you look through the App Frameworks / Localization topic area (which is where I moved your question, btw) you'll find that a significant fraction of the threads are from people having problems when they try to do this. You may be able to work around some of the problems but there are others that have no workaround. Probably the most significant relates to system UI components.<br/><br/><br/>If the system puts up a UI component on your behalf (the document picker, or Game Center user interface parts, or whatever) it will do so in the localisation that it thinks that your app is running in. If your app is 'pretending' to run in some other language, you'll end up with a mixed localisation, where some parts of your app (the parts you control) are in one language and other parts of your app (the parts controlled by the OS) are in another. That's a very poor user experience.<br/><br/><br/>In my opinion it is much better to avoid this problem entirely by localising your app in the standard way and relying on the system to choose the language for you based on the user's system-wide preferences.<br/><br/><br/>— Quinn "The Eskimo!"</blockquote>

</book-section>
<book-section :showing='showing' title='App Store 上架介紹'><div>
<br/>上架條件：<br/><br/>
</div>

<ol>
<li>付費的 Apple Developer Program</li>
<li>於 Developers.apple.com 或 Xcode ，並設定了唯一的 Bundle ID</li>
<li>於 AppStoreConnect (原 iTunesConnect) 上設定了上架所須的資料，並處於 <strong>Ready to Submit</strong> 狀態。</li>
<li>於 Xcode 進行 Project Archive，然後經 Xcode Submit 上 AppStore Connect 並等待審批。</li>
</ol>

<div>
<strong><br/>選擇正確的 Apple Developer Program<br/></strong><br/>
</div>

<div>
<br/>Apple Developer Program 有幾種，但我們基本上只會在 <em>個人</em> 及 <em>公司</em> 兩者間選擇。<br/><br/>
</div>

<div>
<br/>其餘的 <em>Enterprise</em> 及 <em>University</em> 都不是我們常用的選擇。<br/><br/>
</div>

<div>
<strong><br/>使用 Test Flight 進行測試<br/></strong><br/>
</div>

<div>
<br/><a target="_blank" rel="noreferrer" class="autolinked" data-behavior="truncate" href="https://developer.apple.com/testflight/">https://developer.apple.com/testflight/</a><br/><br/>
</div>

<div>
<br/>Test Flight 背後使用了 itms-services 技術。這間公司前身是獨立公司，後來被蘋果收購了。<br/><br/>
</div>

<div>
<strong><br/>蘋果上架指引<br/></strong><br/>
</div>

<div>
<br/><a target="_blank" rel="noreferrer" class="autolinked" data-behavior="truncate" href="https://developer.apple.com/app-store/review/guidelines/">https://developer.apple.com/app-store/review/guidelines/</a><br/><br/>
</div>

<div>
<br/>注意：這個指引會不定時更新，所以建議久不久便要重新閱讀一次。</div>

</book-section>
<book-section :showing='showing' title='使用 AppStoreConnect'><div>首先要認識兩個 Apple 設定後台網址：</div>

<ol>
<li>developer.apple.com</li>
<li>iTunesConnect.apple.com</li>
</ol>

<div>
<br/>注：於 2018 年中，iTunesConnect 已更名為 AppStoreConnect。</div>

<div>
<br/>Developer 網址是用來設定 App 開發相關資訊的，例如 App Provisioning</div>

<div>
<br/>而 iTunes Connect 則是設定在 App Store 上面向用戶的資訊。</div>

<div>
<br/>這個 iTunes Connect，原身是音樂公司於 iTunes 上賣歌的後台設定網站，後來擴展至於 App Store 上發佈應用程式。<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/itunesconnect.png" width="2224" height="1668">
    <figure class="attachment attachment--preview">
  <img width="2224" height="1668" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/itunesconnect.png"/>
</figure>
  </div>
</div>

<div>
<br/>AppStore Connect 分為幾大模塊：</div>

<ol>
<li>Apps</li>
<li>Analytics</li>
<li>Sales and Trends</li>
<li>Payment</li>
<li>User and roles</li>
<li>Agreement, Tax</li>
<li>Resources Help</li>
</ol>

</book-section>
<book-section :showing='showing' title='使用 AlamoFire 取得網絡資源'><div>在 iOS 開發中，我們可以使用 <a href="https://developer.apple.com/documentation/foundation/nsurlsession" target="_blank" rel="noreferrer">NSURLSession</a>。這是 iOS 7 以後加上的，在此前，我們須使用 NSURLConnection 做更底層的網絡操作。</div>

<div>
<br/>然而，為了更集中處理高層次設計，我們可以選擇避開太基層的網絡存取 API 應用，而是使用第三方程序庫。在 iOS Swift 中，其中一個常用到的網絡存取資源庫是 <a href="https://github.com/Alamofire/Alamofire" target="_blank" rel="noreferrer">AlamoFire</a>。<br/><br/>
</div>

<div>在 AlamoFire 的文件中，有幾項可以幫助我們快速上手：</div>

<ul>
<li><a href="https://github.com/Alamofire/Alamofire/blob/master/Documentation/Usage.md#making-a-request" target="_blank" rel="noreferrer">基本存取</a></li>
<li><a href="https://github.com/Alamofire/Alamofire/blob/master/Documentation/AdvancedUsage.md#network-reachability" target="_blank" rel="noreferrer">確定手機可以連接網絡</a></li>
<li><a href="https://github.com/Alamofire/Alamofire/blob/master/Documentation/Usage.md#response-validation" target="_blank" rel="noreferrer">於返回成功才處理數據</a></li>
</ul>

</book-section>
<book-section :showing='showing' title='範例：載入澳門圖書館列表'><div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/alamofire-tableview-images.png" width="750" height="1378">
    <figure class="attachment attachment--preview">
  <img width="750" height="1378" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/alamofire-tableview-images.png"/>
</figure>
  </div>
</div>

<div>
<br/>在這個範例中，我們將使用以下 JSON 作為圖書館列表資料的來源。資料來源自<a href="https://www.library.gov.mo/" target="_blank" rel="noreferrer">澳門政府圖書館網站</a>。<br/><br/>
</div>

<pre>https://s3-us-west-2.amazonaws.com/s.cdpn.io/15649/macao-library.json
<br/></pre>

<div>
<br/>從 AlamoFire 的 Github 中下載整個項目回來後，將檔案放到項目目錄下，接著把 Alamofire.xcodeproj 拖拉進目標 Xcode project。<br/><br/>
</div>

<div>
<br/>僅記在 Project 的 Framework 中要加入 Alamofire.framework。<br/><br/>
</div>

<div>
  <div content-type="image" url="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/alamofire-embed%20framework.png" width="2800" height="1920">
    <figure class="attachment attachment--preview">
  <img width="2800" height="1920" src="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/images/alamofire-embed%20framework.png"/>
</figure>
  </div>
</div>

<div>
<br/>我們會使用自定義的 LibraryListTableViewController 來實現 Table View，在其最頂端，需要匯入 Alamofire 框架，方法是：<br/><br/>
</div>

<pre>import Alamofire
<br/></pre>

<div>
<br/>為了方便稍後載入網絡相片，我們也可以一併匯入 <a href="https://github.com/Alamofire/AlamofireImage" target="_blank" rel="noreferrer">AlamofireImage</a> 擴展。<br/><br/>
</div>

<div>
<br/>接著在 LibraryListTableViewController 中，定義兩個變量：<br/><br/>
</div>

<pre>var libraryData:NSDictionary?
var regionNames:NSMutableArray = []
<br/></pre>

<div>
<br/>然後在 viewDidLoad 中存取目標 JSON:<br/><br/>
</div>

<pre>Alamofire.request("https://s3-us-west-2.amazonaws.com/s.cdpn.io/15649/macao-library.json").validate().responseJSON { (response) in
    let json = response.result.value as! NSDictionary
    
    for (region, _) in json {
        self.regionNames.add(region)
    }
    self.libraryData = json
    self.tableView.reloadData()
}
<br/></pre>

<div>
<br/>以下是 TableView 的各主要函數代碼。（也可以整個<a href="http://ios-dev.netlify.com/b5da5dc4a21a4035ce80c63890c5fd5a93b0bf6f/code_examples/AlamoFireDemo.zip" target="_blank" rel="noreferrer">項目範例下載</a>）<br/><br/>
</div>

<pre>override func numberOfSections(in tableView: UITableView) -&gt; Int {
    if libraryData != nil {
        return libraryData!.count
    }
    return 0
}

override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
    if libraryData != nil {
        
        let libraries = libraryData![regionNames[section]] as! NSArray
        return libraries.count
    }
    return 0
}

override func tableView(_ tableView: UITableView, titleForHeaderInSection section: Int) -&gt; String? {
    if libraryData != nil {
        
        return regionNames[section] as? String
    }
    return ""
}


override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: "BasicCell", for: indexPath)

    // Configure the cell...
    let libraries = libraryData![regionNames[indexPath.section]] as! NSArray
    let library:NSDictionary = libraries[indexPath.row] as! NSDictionary

    cell.textLabel?.text = library["name"] as? String
    cell.accessoryType = .disclosureIndicator
    
    // 若果有使用 AlamofireImage 擴展
    let photoURL = URL(string: library["photo"] as! String)        
    
    cell.imageView?.af_setImage(withURL: photoURL!, filter:AspectScaledToFillSizeFilter(size: CGSize(width: 50, height: 50)), completion: { (_) in
        tableView.reloadRows(at: [indexPath], with: .none)
    })


    return cell
}</pre>

</book-section>
<book-section :showing='showing' title='錯誤提示'><div>
<br/>網絡存取時有發生錯誤的時候，例如當用戶進入升降機時，原本正在送出的網絡請求便有機會超時。這時我們可以向用戶顯示提示，這涉及兩個層次：<br/><br/>
</div>

<ol>
<li>給出一個用戶能明白的錯誤文字</li>
<li>決定彈出錯誤的界面方式</li>
</ol>

<div>
<br/>其中一個常見的錯誤是存取超時，如果我們直接將錯誤信息跟用戶說，例如 “Error: Request Timeout”，用戶未必會知道發生了什麼事，但如果我們將信息改為：「暫時未能存取網絡，請稍後再試，如問題持續可以聯絡我們」，這樣便會有更好的用戶體驗。<br/><br/>
</div>

<div>
<br/>至於界面，我們有幾個選擇：<br/><br/>
</div>

<ol>
<li>使用 UIAlert 彈出錯誤提示信息。這是最常見的方式。</li>
<li>自定一個由上向下的錯誤信息橫條 Banner，置於屏幕上方。（或由下向上放於下方）。常用於錯誤不影響用戶繼續操作的情況下</li>
<li>使用覆蓋全畫面的錯誤提示。例如一些錯誤希望用戶提供額外資料</li>
</ol>

</book-section>
<book-section :showing='showing' title='載入中提示'><div>在 iOS 系統中，有兩種載入界面可以使用。</div>

<ol>
<li><a href="https://developer.apple.com/documentation/uikit/uiapplication/1623102-networkactivityindicatorvisible" target="_blank" rel="noreferrer">於 Status Bar 上顯示</a></li>
<li><a href="https://developer.apple.com/documentation/uikit/uiactivityindicatorview" target="_blank" rel="noreferrer">使用 UIActivityIndicatorView</a></li>
</ol>

<div>Apple 官網也有使用<a href="https://developer.apple.com/design/human-interface-guidelines/ios/controls/progress-indicators/" target="_blank" rel="noreferrer">詳情說明</a>。</div>

</book-section></div></main><aside id='toc' v-show='showing!="Table of Content"'><ol class='toc'><li><a href='#' @click="showing='Table of Content'">Table of Content</a></li><li><a href='#' @click="showing='Xcode 介面介紹'">Xcode 介面介紹</a></li><li><a href='#' @click="showing='開發 iOS App，我應該選擇 Objective-C 還是 Swift 語言？'">開發 iOS App，我應該選擇 Objective-C 還是 Swift 語言？</a></li><li><a href='#' @click="showing='iOS Simulator'">iOS Simulator</a></li><li><a href='#' @click="showing='UIImageView'">UIImageView</a></li><li><a href='#' @click="showing='Extension'">Extension</a></li><li><a href='#' @click="showing='IBAction & IBOutlet'">IBAction & IBOutlet</a></li><li><a href='#' @click="showing='Storyboard'">Storyboard</a></li><li><a href='#' @click="showing='UIButton'">UIButton</a></li><li><a href='#' @click="showing='UserDefaults'">UserDefaults</a></li><li><a href='#' @click="showing='Core Data'">Core Data</a></li><li><a href='#' @click="showing='保護層級'">保護層級</a></li><li><a href='#' @click="showing='設定多語言'">設定多語言</a></li><li><a href='#' @click="showing='多語言下的檔案列表'">多語言下的檔案列表</a></li><li><a href='#' @click="showing='輸出及匯入多語言檔案'">輸出及匯入多語言檔案</a></li><li><a href='#' @click="showing='App Store 上架介紹'">App Store 上架介紹</a></li><li><a href='#' @click="showing='使用 AppStoreConnect'">使用 AppStoreConnect</a></li><li><a href='#' @click="showing='使用 AlamoFire 取得網絡資源'">使用 AlamoFire 取得網絡資源</a></li><li><a href='#' @click="showing='範例：載入澳門圖書館列表'">範例：載入澳門圖書館列表</a></li><li><a href='#' @click="showing='錯誤提示'">錯誤提示</a></li><li><a href='#' @click="showing='載入中提示'">載入中提示</a></li></ol></aside></div></div><div id="move-to-top"><a href="#">Move to Top</a></div>

<script src='https://unpkg.com/vue@2.5.17/dist/vue.js'></script>
<script>
  // reader.js

Vue.component('book-section', {
  props: ['title', 'showing'],
  template: `
    <section href='#' v-show='showing==title'>
      <h1>{{title}}</h1>
      <slot></slot>
    </section>
  `
})

new Vue({
  el: "#book",
  data: {
    showing: 'Table of Content'
  }
})
</script>